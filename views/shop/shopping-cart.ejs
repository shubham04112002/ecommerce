<%- layout("/layouts/boilerplate") %>

<div class="container cart">
  <% if(cart !== null && !cart.paid){ %>
  <div class="row">
    <div class="col-md-11 col-sm-12 m-auto table-responsive">
      <table class="table text-center">
        <thead>
          <tr>
            <th>Product</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>Quantity</th>
            <th>&nbsp;</th>
            <th>Total</th>
            <th>Subtotal</th>
            <th>&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(product =>{ %> <% if(product !==null){ %>
          <tr>
            <td>
              <a
                href="/products/<%= product.category.slug %>/<%= product._id %>"
              >
                <img
                  src="<%= product.imagePath %>"
                  alt="<%= product.title %>"
                  class="img-small img-fluid"
                />
              </a>
            </td>

            <td>
              <div class="float-left mb-3">
                <a
                  href="/products/<%= product.category.slug %>/<%= product._id %>"
                  class="title-link"
                >
                  <h6 class="text-left"><%= product.title %></h6>
                  <p class="text-left">
                    Product No: <%= product.productCode %>
                  </p>
                </a>
              </div>
            </td>

            <td class="text-center">
              <a href="/add-to-cart/<%= product._id %>"
                ><i class="fa fa-plus-square" aria-hidden="true"></i
              ></a>
            </td>

            <td class="text-center">
              <p class="qty-display pt-1"><%= product.qty %></p>
            </td>

            <td class="text-center">
              <a href="/reduce/<%= product._id %>"
                ><i class="fa fa-minus-square"></i
              ></a>
            </td>
            <td>₹<%= product.price %></td>
            <td>₹<%= product.totalPrice %></td>
            <td>
              <a
                href="/remove/<%= product._id  %>"
                class="btn btn-danger btn-sm button-style-danger"
                >Remove All</a
              >
            </td>
          </tr>
          <% } %> <% }) %>
        </tbody>
      </table>
    </div>
  </div>
  <hr />
  <div class="row mt-4 me-auto">
    <div class="col-md-11 col-sm-12 m-auto">
      <strong>Total: <%= cart.totalCost %> </strong>
    </div>
  </div>

  <div class="row mt-2 me-auto">
    <div class="col-md-11 col-sm-12 m-auto">
      <a href="/checkout" class="btn btn-dark button-style">Checkout</a>
    </div>
  </div>
  <% }else{ %>
  <div class="row text-center">
    <div class="col-md-9 col-sm-9 m-auto">
      <h2>No items in the cart</h2>
    </div>
  </div>
  <% } %>
</div>
